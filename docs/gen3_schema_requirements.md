# Gen3 Schema Requirements

This document outlines the business requirements for a Gen3 data dictionary.

Note: A single jsonschema represents a single entity in the data model. Multiple jsonschemas, representing multiple entities are bundled into a list of jsonschemas and saved to a single json file. This json file is called a gen3 bundled jsonschema, and is uploaded to to sheepdog to deploy the data model.

## Examples

## Summary of Gen3 Schema Keys
- *Note:* Yaml examples of this table can be found [here](../examples/schema/yaml/lipidomics_file.yaml).

| schema key           | description                                                                                 | required user input | specificity | default value                                                     | data type                                                                                                                     | json example                                                                                                                                                                                                                      |
| -------------------- | ------------------------------------------------------------------------------------------- | ------------------- | ----------- | ----------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id                   | Unique identifier for the entity                                                            | yes                 | jsonschema  | n/a                                                               | String                                                                                                                        | ```"lipidomics_file"```                                                                                                                                                                                                          |
| title                | Name of the entity                                                                          | yes                 | jsonschema  | n/a                                                               | String                                                                                                                        | ```"Lipidomics File"```                                                                                                                                                                                                          |
| category             | Classification of entity                                                                    | yes                 | gen3        | n/a                                                               | Enum `['administrative', 'index_file', 'biospecimen', 'clinical', 'notation', 'data_file', 'analysis', 'experimental_methods']`| ```"data_file"```                                                                                                                                                                                                                |
| description          | Description of the schema                                                                   | yes                 | jsonschema  | n/a                                                               | String                                                                                                                        | ```"Data file containing lipidomics data"```                                                                                                                                                                                     |
| links                | Array of objects that describe links to other entities                                      | yes                 | gen3        | n/a                                                               | Array                                                                                                                         | ```[{"exclusive": false, "required": true, "subgroup": [{"name": "samples", "backref": "lipidomics_files", "label": "data_from", "target_type": "sample", "multiplicity": "many_to_many", "required": false}]}]```                  |
| required             | Array listing the property names that must be present in a valid json object                | yes                 | jsonschema  | `['type', 'submitter_id', 'core_metadata_collection']`            | Array                                                                                                                         | ```["type", "submitter_id", "core_metadata_collection", "data_type", "data_format", "data_category"]```                                                                                                                              |
| type                 | Data type for the entity                                                                    | no                  | jsonschema  | object                                                            | String                                                                                                                        | ```"object"```                                                                                                                                                                                                                   |
| namespace            | Namespace                                                                                   | no                  | gen3        | n/a                                                               | String                                                                                                                        | ```"http://commons.heartdata.baker.edu.au/"```                                                                                                                                                                                    |
| program              | program the schema belongs to                                                               | no                  | gen3        | *                                                                 | String                                                                                                                        | ```"*"```                                                                                                                                                                                                                        |
| project              | project the schema belongs to                                                               | no                  | gen3        | *                                                                 | String                                                                                                                        | ```"*"```                                                                                                                                                                                                                        |
| additionalProperties | A boolean that controls whether properties not explicitly defined in properties are allowed | no                  | jsonschema  | False                                                             | Bool                                                                                                                          | ```false```                                                                                                                                                                                                                      |
| submittable          | can you submit data to this entity?                                                         | no                  | gen3        | True                                                              | Bool                                                                                                                          | ```true```                                                                                                                                                                                                                       |
| validators           | Custom field to hold validation logic                                                       | no                  | gen3        | None                                                              | String                                                                                                                        | ```null```                                                                                                                                                                                                                       |
| systemProperties     | A list of gen3 specific properties                                                          | no                  | gen3        | `['id', 'project_id', 'state', 'created_datetime', 'updated_datetime']` | Array                                                                                                                         | ```["id", "project_id", "state", "created_datetime", "updated_datetime"]```                                                                                                                                                           |
| uniqueKeys           | Properties in the entity that will be used for unique identification                        | no                  | gen3        | `[['id'], ['project_id', 'submitter_id']]`                          | Array                                                                                                                         | ```[["id"], ["project_id", "submitter_id"]]```                                                                                                                                                                                   |