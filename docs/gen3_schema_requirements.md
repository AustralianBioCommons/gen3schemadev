# Gen3 Schema Requirements

This document outlines the business requirements for a Gen3 data dictionary.

Note: A single jsonschema represents a single entity in the data model. Multiple jsonschemas, representing multiple entities are bundled into a list of jsonschemas and saved to a single json file. This json file is called a gen3 bundled jsonschema, and is uploaded to to sheepdog to deploy the data model.

## Example 

## Required User Inputs
| schema key           | description                                                                                 | required user input | specificity | default value                                                     | data type                                                                                                                     | json example                                                                                                                                                                                                                      | yaml example                                                                                                                                                                                              |
| -------------------- | ------------------------------------------------------------------------------------------- | ------------------- | ----------- | ----------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id                   | Unique identifier for the entity                                                            | yes                 | jsonschema  | n/a                                                               | String                                                                                                                        | lipidomics_file                                                                                                                                                                                                                   | lipidomics_file                                                                                                                                                                                           |
| title                | Name of the entity                                                                          | yes                 | jsonschema  | n/a                                                               | String                                                                                                                        | Lipidomics File                                                                                                                                                                                                                   | Lipidomics File                                                                                                                                                                                           |
| category             | Classification of entity                                                                    | yes                 | gen3        | n/a                                                               | Enum ['administrative', 'index_file', 'biospecimen', 'clinical', 'notation', 'data_file', 'analysis', 'experimental_methods'] | data_file                                                                                                                                                                                                                         | data_file                                                                                                                                                                                                 |
| description          | Description of the schema                                                                   | yes                 | jsonschema  | n/a                                                               | String                                                                                                                        | Data file containing lipidomics data                                                                                                                                                                                              | Data file containing lipidomics data                                                                                                                                                                      |
| links                | Array of objects that describe links to other entities                                      | yes                 | gen3        | n/a                                                               | Array                                                                                                                         | [{'exclusive': False,<br>'required': True,<br>'subgroup': [{'name': 'samples',<br>'backref': 'lipidomics_files',<br>'label': 'data_from',<br>'target_type': 'sample',<br>'multiplicity': 'many_to_many',<br>'required': False}]}] | links:<br>\- exclusive: false<br>required: true<br>subgroup:<br>\- name: samples<br>backref: lipidomics_files<br>label: data_from<br>target_type: sample<br>multiplicity: many_to_many<br>required: false |
| required             | Array listing the property names that must be present in a valid json object                | yes                 | jsonschema  | ['type', 'submitter_id', 'core_metadata_collection']              | Array                                                                                                                         | ['type','submitter_id','core_metadata_collection','data_type','data_format','data_category']                                                                                                                                      | required:<br>\- type<br>\- submitter_id<br>\- core_metadata_collection<br>\- data_type<br>\- data_format<br>\- data_category                                                                              |
| type                 | Data type for the entity                                                                    | no                  | jsonschema  | object                                                            | String                                                                                                                        | object                                                                                                                                                                                                                            | object                                                                                                                                                                                                    |
| namespace            | Namespace                                                                                   | no                  | gen3        | n/a                                                               | String                                                                                                                        | [http://commons.heartdata.baker.edu.au/](http://commons.heartdata.baker.edu.au/)                                                                                                                                                  | [http://commons.heartdata.baker.edu.au/](http://commons.heartdata.baker.edu.au/)                                                                                                                          |
| program              | program the schema belongs to                                                               | no                  | gen3        | \*                                                                | String                                                                                                                        | \*                                                                                                                                                                                                                                | \*                                                                                                                                                                                                        |
| project              | project the schema belongs to                                                               | no                  | gen3        | \*                                                                | String                                                                                                                        | \*                                                                                                                                                                                                                                | \*                                                                                                                                                                                                        |
| additionalProperties | A boolean that controls whether properties not explicitly defined in properties are allowed | no                  | jsonschema  | False                                                             | Bool                                                                                                                          | False                                                                                                                                                                                                                             | False                                                                                                                                                                                                     |
| submittable          | can you submit data to this entity?                                                         | no                  | gen3        | True                                                              | Bool                                                                                                                          | True                                                                                                                                                                                                                              | True                                                                                                                                                                                                      |
| validators           | Custom field to hold validation logic                                                       | no                  | gen3        | None                                                              | String                                                                                                                        | None                                                                                                                                                                                                                              | None                                                                                                                                                                                                      |
| systemProperties     | A list of gen3 specific properties                                                          | no                  | gen3        | ['id','project_id','state','created_datetime','updated_datetime'] | Array                                                                                                                         | ['id','project_id','state','created_datetime','updated_datetime']                                                                                                                                                                 | systemProperties:<br>\- id<br>\- project_id<br>\- state<br>\- created_datetime<br>\- updated_datetime                                                                                                     |
| uniqueKeys           | Properties in the entity that will be used for unique identification                        | no                  | gen3        | [['id'], ['project_id', 'submitter_id']]                          | Array                                                                                                                         | [['id'], ['project_id', 'submitter_id']]                                                                                                                                                                                          | uniqueKeys:<br>\- - id<br>\- - project_id<br>\- submitter_id                                                                                                                                              |




#### Internal Gen3 Properties

| schema key | description                        | json example                                                                                                       | yaml example                                                                 |
| ---------- | ---------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------- |
| id         | Unique identifier for the entity   | ```json<br>"lipidomics_file"<br>```                                                                                | ```yaml<br>lipidomics_file<br>```                                             |
| title      | Name of the entity                 | ```json<br>"Lipidomics File"<br>```                                                                                | ```yaml<br>Lipidomics File<br>```                                             |
| links      | Array of objects linking entities  | ```json<br>[{ "exclusive": false, "required": true, "subgroup": [{ "name": "samples", "backref": "lipidomics_files" }] }]<br>``` | ```yaml<br>links:<br>  - exclusive: false<br>    required: true<br>    subgroup:<br>      - name: samples<br>        backref: lipidomics_files<br>``` |